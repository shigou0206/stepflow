{
    "name": "UserEvaluationFlow",
    "description": "根据 user_type 与 score 进行分支判断，并触发 HTTP 请求或等待审批。",
    "template_id": "tmpl_87c9b3f2",
    "dsl_definition": "{\n  \"StartAt\": \"EvaluateUserType\",\n  \"States\": {\n    \"EvaluateUserType\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Condition\": {\n            \"Variable\": \"$.user_type\",\n            \"Operator\": \"Equals\",\n            \"Value\": \"admin\"\n          },\n          \"Next\": \"HttpTask1\"\n        },\n        {\n          \"Condition\": {\n            \"Variable\": \"$.user_type\",\n            \"Operator\": \"Equals\",\n            \"Value\": \"guest\"\n          },\n          \"Next\": \"GuestNotice\"\n        }\n      ],\n      \"Default\": \"RejectUser\"\n    },\n\n    \"HttpTask1\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"HttpTool\",\n      \"Parameters\": {\n        \"url\": \"https://httpbin.org/get\",\n        \"method\": \"GET\",\n        \"parse_json\": true\n      },\n      \"ResultExpr\": \"$.json\",\n      \"Next\": \"AddNote\"\n    },\n\n    \"AddNote\": {\n      \"Type\": \"Pass\",\n      \"Result\": { \"message\": \"First request done\" },\n      \"ResultPath\": \"$.note\",\n      \"Next\": \"EvaluateScore\"\n    },\n\n    \"EvaluateScore\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Condition\": {\n            \"Variable\": \"$.score\",\n            \"Operator\": \"GreaterThan\",\n            \"Value\": 90\n          },\n          \"Next\": \"HttpTask2\"\n        }\n      ],\n      \"Default\": \"WaitForApproval\"\n    },\n\n    \"HttpTask2\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"HttpTool\",\n      \"Parameters\": {\n        \"url\": \"https://httpbin.org/get\",\n        \"method\": \"GET\",\n        \"parse_json\": true\n      },\n      \"End\": true\n    },\n\n    \"WaitForApproval\": {\n      \"Type\": \"Wait\",\n      \"Seconds\": 5,\n      \"End\": true\n    },\n\n    \"GuestNotice\": {\n      \"Type\": \"Pass\",\n      \"Result\": { \"note\": \"Guests cannot proceed\" },\n      \"End\": true\n    },\n\n    \"RejectUser\": {\n      \"Type\": \"Fail\",\n      \"Error\": \"Unauthorized\",\n      \"Cause\": \"User type not allowed\"\n    }\n  }\n}"
}